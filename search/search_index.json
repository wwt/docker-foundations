{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Docker Foundations Hands-On","text":"<p>Quote</p> <p>\"Docker is a set of platform as a service products that use OS-level virtualization to deliver software in packages called containers. Containers are isolated from one another and bundle their own software, libraries and configuration files; they can communicate with each other through well-defined channels.\" ~ wikipedia</p>"},{"location":"#overview","title":"Overview","text":"<p>This Hands-On walk-through is designed to provide you real-world exposure to the foundational Docker instructions needed to build a Docker image and integrate it with Visual Studio Code.  The outcome from this lab is both knowledge of building Docker containers plus the added benefit of learning how to utilize the container as your development environment when using Visual Studio Code.</p> <p>Here are some additional resources available:</p> <p> WWT Programmability Foundations Lab \u2014 Docker Section</p>"},{"location":"#what-you-need","title":"What You Need","text":"<ol> <li>A Windows or macOS computer with Docker Desktop.</li> <li>If you are new to Docker, here is the Docker Desktop Installation Documentation.</li> <li>Alternatively, you can install Docker in a Linux Environment and complete the walkthrough.</li> <li>Visual Studio Code (download)</li> </ol>"},{"location":"#whats-next","title":"What's Next","text":"<p>The next section will guide you through getting your environment prepared for the lab.</p>"},{"location":"sections/section_1/","title":"\u200b Setup: Visual Studio Code","text":"<p>The What You Need section indicated that you would need to have Visual Studio Code installed on your local machine for these exercises.  Visual Studio Code supports enhanced features via Extensions that can be installed from the Extensions Marketplace.</p> <p>The Extensions Marketplace can be found by clicking the  on the left side of your Visual Studio Code window.</p>"},{"location":"sections/section_1/#docker-extension","title":"Docker Extension","text":"<p>The first extension to add is the Docker extension.  This will provide capabilities like syntax highlighting in Dockerfiles, auto-completion of instructions, and much more.  You can read more about the Extension on the Visual Studio Code Marketplace page.</p> <ol> <li>OPEN Visual Studio Code</li> <li>CLICK the Extensions Icon on the left</li> <li>ENTER <code>ms-azuretools.vscode-docker</code> in the Search Extensions in Marketplace box</li> <li>SELECT Install</li> </ol> <p></p>"},{"location":"sections/section_1/#remote-development-extension","title":"Remote Development Extension","text":"<p>The second Visual Studio Code Extension required is the Remove Development Extension Pack.  This is a bundle of Extensions for connecting to different remote environments including SSH, Containers, and Windows.</p> <p>This section will illustrate the additional Visual Studio Code Extension needed to integrate it with Docker.</p> <ol> <li>CLICK in the Search Extensions in Marketplace box</li> <li>ENTER <code>ms-vscode-remote.vscode-remote-extensionpack</code> in the **Search Extensions in Marketplace ** box</li> <li>SELECT Install</li> </ol> <p>Note</p> <p>Reload the window if prompted.</p> <p>The Extension details will indicate that the extension is installed and enabled as seen below.</p> <p></p>"},{"location":"sections/section_1/#whats-next","title":"What's Next","text":"<p>Now that you have installed the required Visual Studio Code Extensions from the Marketplace you will create a new GitHub repository, clone that locally and open it in Visual Studio Code.</p>"},{"location":"sections/section_2/","title":"Setup: Create and Open a New Project","text":"<p>This section will guide you through creating a new repository on GitHub and opening that new repository in Visual Studio Code.</p> <p>Note</p> <p>There are multiple approaches to accomplish these same tasks.  This section represents one workflow.</p>"},{"location":"sections/section_2/#create-a-repo-on-github","title":"Create a Repo on GitHub","text":"<p>This workflow will start with creating a repository for your project on GitHub.  GitHub provides remote version control system for your local repository and many advanced collaboration capabilities.</p> <p>You can learn more about GitHub in the GitHub Documentation.</p> <p>Note</p> <p>Additional Resources</p> <p>Git Foundations Walk Through</p> <p>Version Control Lab</p> <p>Version Control Video</p> <ol> <li> <p>NAVIGATE to GitHub</p> </li> <li> <p>CLICK the New  button next to Repositories</p> </li> </ol> <p></p> <p></p> <ol> <li> <p>NAME the repo docker-foundations-lab (#1 in the image above)</p> </li> <li> <p>SET the repo to Private (#2 in the image above)</p> </li> <li> <p>CLICK Add a README file (# 3 in the image above)</p> </li> <li> <p>CLICK Add .gitignore and SELECT Python (# 3 in the image above)</p> </li> <li> <p>CLICK Choose a license and SELECT Apache License 2.0 (# 3 in the image above)</p> </li> <li> <p>CLICK Create Repository (# 4 in the image above)</p> </li> </ol> <p></p> <p>Now that you have created your new repository on GitHub you can move forward with opening this new project in Visual Studio Code.</p>"},{"location":"sections/section_2/#opening-your-repo-in-visual-studio-code","title":"Opening Your Repo in Visual Studio Code","text":"<p>There are two ways to approach this step:</p> <ol> <li>Manually clone the repo from the terminal</li> <li>Use the functionality built into Visual Studio Code</li> </ol>"},{"location":"sections/section_2/#manually-clone-method","title":"Manually Clone Method","text":"<ol> <li> <p>NAVIGATE to your repo on GitHub</p> </li> <li> <p>CLICK the Code button</p> </li> <li> <p>SELECT the transport (HTTPS or SSH)</p> </li> <li> <p>CLICK the Copy icon    \u200b    </p> </li> <li> <p>OPEN a new Terminal</p> </li> <li> <p>PASTE <code>git clone</code> plus that string into your Terminal</p> <p>Example</p> <p>SSH <code>git clone git@github.com:jandiorio/docker-foundations-lab.git</code></p> <p>HTTPS <code>git clone https://github.com/jandiorio/docker-foundations-lab.git</code></p> <p>Important</p> <p>The command above will clone down the repository creating a subfolder with the name of the repo in the folder where you ran the command.</p> <p></p> </li> <li> <p>OPEN the new Folder in Visual Studio Code using Open Folder</p> </li> </ol>"},{"location":"sections/section_2/#clone-and-open-directly-in-visual-studio-code","title":"Clone and Open Directly in Visual Studio Code","text":"<ol> <li> <p>OPEN a new Visual Studio Code Window</p> </li> <li> <p>CLICK the Explorer icon </p> </li> <li> <p>CLICK Clone Repository</p> <p></p> </li> <li> <p>PASTE repository string</p> <p></p> </li> <li> <p>SELECT the parent directory</p> <p>Tip</p> <p>I have a folder named development where all of my development projects are located.</p> </li> <li> <p>CLICK Open in the dialog prompt to Open the Repository </p> </li> </ol>"},{"location":"sections/section_2/#whats-next","title":"What's Next","text":"<p> Now you are ready to get to the \"meat\" of the tomato...next you will walk through the basics of building a <code>Dockerfile</code>.</p>"},{"location":"sections/section_3/","title":"Build a <code>Dockerfile</code>","text":"<p>This section will guide you through building a <code>Dockerfile</code> that will be used as part of the integration with Visual Studio Code.</p> <p>Scenario: Imagine you want to start a new Python-based development project and need to get your development environment setup and ready.</p> <p>Quote</p> <p>A <code>Dockerfile</code> is a text document that contains all the commands a user could call on the command line to assemble an image. Using <code>docker build</code> users can create an automated build that executes several command-line instructions in succession.</p> <p>A Dockerfile defines how an image is built.  Once built, the Docker image is the blueprint that will be used to instantiate an ephemeral instance called a container.</p>"},{"location":"sections/section_3/#selecting-a-base-image","title":"Selecting a Base Image","text":"<p>Typically, the image that you will build for your projects will be based on a foundational image someone else created.  There are a significant number of existing images that you can use as the base of your image.</p> <p>The best approach is to visit Docker Hub and see what images are available based on the focus on your project.</p> <p>Scenario: Your project is Python-based, so the base image will be one of the available Python images.</p> <p>There are very simple filtering and searching capabilities on Docker Hub that make it easy to quickly narrow down the options for your base image.</p> <ol> <li>NAVIGATE to https://hub.docker.com</li> <li>CLICK Explore</li> <li>CLICK Official Images</li> <li>CLICK Programming Languages</li> <li>CLICK Python</li> </ol> <p></p> <p>Feel free to review the available images and read the supporting documentation about the images.  This example will utilize a Python base image named slim-buster.</p> <p>Info</p> <p>Here are some instructions for building a base image if you so desire: Base Images</p>"},{"location":"sections/section_3/#create-the-initial-dockerfile","title":"Create the Initial Dockerfile","text":"<p>Once you have selected the desired base image you can start to build your <code>Dockerfile</code> for the project. The first line of a Dockerfile is almost always the <code>FROM</code> command.  The only other command that can precede  <code>FROM</code> is <code>ARG</code>.  This section keeps it simple and uses only <code>FROM</code></p> <ol> <li>CREATE a new file named Dockerfile in the root of your project directory</li> <li>ADD the following first line</li> </ol> <p>\u200b    <code>FROM python:slim-buster</code></p> <p></p>"},{"location":"sections/section_3/#providing-meta-data","title":"Providing Meta Data","text":"<p>Using the <code>LABEL</code> command we can include some information about the Dockerfile to increase supportability down the road.  The <code>LABEL</code> command allows you to define a series of key and value pairs of attributes.</p> <pre><code># Define some meta data\nLABEL author=\"Jeff Andiorio\" email=\"jeff.andiorio@wwt.com\"\n</code></pre>"},{"location":"sections/section_3/#installing-os-requirements","title":"Installing OS Requirements","text":"<p>There will be many occasions where you will need to add some OS level packages that rely on a package manager for installation.  In this case we are on a Debian Linux based system which uses <code>apt</code> as a package manager.</p> <p>In the Dockerfile you can use the <code>RUN</code> command to provide instructions to perform these package installations.  The <code>RUN</code> instruction can be used for executing commands on the target container.  This section will use the shell syntax.  Check the Docker documentation for more information.</p> <pre><code># Update Debian Packages and Install Git\nRUN apt-get update &amp;&amp; apt-get -y install git\n</code></pre> <p>Since this will be our development environment we will need to have <code>git</code> installed in the container.</p>"},{"location":"sections/section_3/#create-a-working-directory","title":"Create a Working Directory","text":"<p>A Working Directory is set to be the source directory for all subsequent <code>RUN</code>, <code>CMD</code>, <code>COPY</code>, and <code>ADD</code> Dockerfile Instructions.  This walk-through will create a <code>/development</code> directory in our container and set it as our working directory</p> <p>Tip</p> <p>If the directory doesn't exist it will be created automatically.</p> <ol> <li>APPEND the <code>WORKDIR</code> instruction to the <code>Dockerfile</code></li> </ol> <pre><code># Set the new directory\nWORKDIR /development\n</code></pre>"},{"location":"sections/section_3/#copy-files","title":"Copy Files","text":"<p>Another common need is to copy files into the container.  When using the container as a development environment, Visual Studio Code will automatically mount the project directory and make the files available within the container.  This relates to files you need to have available in the Docker image (aside from your development repo) like the <code>requirements.txt</code> file, so we can install packages.</p> <p>Scenario: The python project will require a couple of additional python packages.  Create a <code>requirements.txt</code> file and make sure it's available to your Docker image.</p> <ol> <li> <p>CREATE a file named <code>requirements.txt</code> in the project root directory</p> </li> <li> <p>ADD the text below to the file</p> </li> </ol> <pre><code>pyaml\nrequests\nflake8\n</code></pre> <ol> <li> <p>SAVE the file</p> </li> <li> <p>APPEND the <code>COPY</code> instruction to the <code>Dockerfile</code></p> <pre><code># Copy requirements.txt into Container\nCOPY requirements.txt /development\n</code></pre> </li> </ol>"},{"location":"sections/section_3/#installing-python-requirements","title":"Installing Python Requirements","text":"<p>Scenario: Just having the requirements.txt file will not install the required packages.  Add the 'RUN' command to the <code>Dockerfile</code> to install your python project requirements.</p> <ol> <li> <p>APPEND the <code>RUN</code> instruction to the <code>Dockerfile</code> to install the python requirements</p> <pre><code># Install Python Requirements\nRUN pip install -r requirements.txt\n</code></pre> </li> </ol> <p>Info</p> <p>The 'RUN' command above will look for the <code>requirements.txt</code> file in the <code>WORKDIR</code> which is where you copied the file.</p>"},{"location":"sections/section_3/#final-file","title":"Final File","text":"<p>If you have followed all the instructions, your final Dockerfile will look similar to this:</p> <p>Tip</p> <p>The <code>LABEL</code> instruction will have your information.</p> <pre><code>FROM python:slim-buster\n\n# Define some meta data\nLABEL author=\"Jeff Andiorio\" email=\"jeff.andiorio@wwt.com\"\n\n# Update Debian Packages and Install Git\nRUN apt-get update &amp;&amp; apt-get -y install git\n\n# Set the new directory\nWORKDIR /development\n\n# Copy requirements.txt into Container\nCOPY requirements.txt /development\n\n# Install Python Requirements\nRUN pip install -r requirements.txt\n</code></pre>"},{"location":"sections/section_3/#whats-next","title":"What's Next","text":"<p>Now that you have the completed <code>Dockerfile</code> created and have successfully utilized several of the basic Dockerfile instructions how can you use that file?</p>"},{"location":"sections/section_4/","title":"Integrate Docker with Visual Studio Code","text":"<p>Visual Studio Code provides integrations with Docker that make the elements of your development environment (where you write code + where you execute code) complete seamless and highly portable.</p> <p>Just including the <code>Dockerfile</code> in your repository means anyone collaborating or consuming your code will have an identical execution environment as where developed the solution.</p> <p>Scenario: Integrate our Docker image into Visual Studio Code, so we can take advantage of the seamless development environment and utilize feature like the Python Debugger and Integrated terminal.</p>"},{"location":"sections/section_4/#brief-overview-of-vsc-integration","title":"Brief Overview of VSC Integration","text":"<p>The Visual Studio Code Remote - Container extension is one of the extensions included with the bundle we installed earlier.  This extension allows you to use a container as your fully-integrated development environment, exposing all the features of Visual Studio Code to you within it.</p> <p>There are multiple ways to utilize a container as your development environment within Visual Studio Code, but we will look at the most integrated and automated method.</p> <p>Developing inside a Container</p>"},{"location":"sections/section_4/#create-a-devcontainerjson-config-file","title":"Create a <code>.devcontainer.json</code> Config File","text":"<p>When Visual Studio Code start it looks for a configuration file named <code>.devcontainer.json</code> located either at the project root or in a subfolder named <code>.devcontainer</code>.  The existence of this file will prompt Visual Studio Code to use the contents of that configuration file to map your development environment to a container.</p> <ol> <li> <p>CREATE a file  named <code>.devcontainer.json</code> in the root of your project</p> </li> <li> <p>ADD <code>json</code> formatted key/value for the Dockerfile</p> </li> </ol> <pre><code>{\n  \"dockerFile\": \"Dockerfile\"\n}\n</code></pre>"},{"location":"sections/section_4/#add-extensions","title":"Add Extensions","text":"<p>Earlier you added some extensions to Visual Studio Code to support the build of our Dockerfile and integration with Visual Studio Code.  Since your current project is a Python project you will want to add a Python extension to Visual Studio Code, and to the container specifically.</p> <ol> <li>CLICK the Extensions Icon on the left</li> <li>PASTE <code>ms-python.python</code> in the Search box and PRESS &lt;enter&gt;</li> <li> <p>RIGHT-CLICK the extension and select \"Add to <code>`devcontainer.json</code>\"</p> <p></p> </li> <li> <p>OPEN the <code>devcontainer.json</code> file and review the change</p> </li> </ol> <p> \"devcontainer.json\"</p>"},{"location":"sections/section_4/#open-project-in-container","title":"Open Project in Container","text":"<p>All the pieces are now in place.  You will need to reopen your project in the container to have your fully functional Docker container-based development environment activated.</p> <ol> <li> <p>CLICK the  at the bottom left</p> </li> <li> <p>SELECT Reopen in Container</p> </li> </ol> <p></p> <ol> <li>REVIEW  the environment</li> </ol> <p></p> <p>Attention</p> <p>Notice the bottom left corner shows Dev Container.  This is confirmation that you are connected to a Remote Container using the devcontainer integration.</p> <p>Attention</p> <p>Notice the terminal (open one if it isn't open already) is inside the container (should show root@...).</p> <p>Attention</p> <p>Notice that a Python Interpretter has been automatically selected for you.</p>"},{"location":"sections/section_4/#whats-next","title":"What's Next","text":"<p>The last thing for you to do is test the environment.  The next and last sections will provide a very basic review of the environment.</p>"},{"location":"sections/section_5/","title":"Visual Studio Code Development Environment Review","text":"<p>The goal of this walk-through was to expose you to the integrations with simple examples.  This section validates the environment is ready for use.</p>"},{"location":"sections/section_5/#python-integration","title":"Python Integration","text":"<p>In this section you will create a simple Python script to retrieve search results from iTunes.  You are looking to validate the Python functionality within the Visual Studio Code Editor.</p> <p> Don't worry, you don't have to know any Python at this point...</p> <ol> <li>CREATE a file named <code>search_itunes.py</code></li> <li> <p>PASTE the Python code below</p> <pre><code>import sys\nimport requests\n\n# CONSTANTS\nBASE_URL = \"https://itunes.apple.com/search?country=US\"\nMEDIA = ['movie', 'music', 'podcast']\n\n# INPUT VARIABLES\nmedia = input(\"What type of media? [movie, music, or podcast]:  \").lower()\n\n# VALIDATE INPUT\nif media not in MEDIA:\n    print(f\"Please type one of the valid options [{MEDIA}]\")\n    sys.exit()\n\nterm = input(\"Enter search string:  \").lower()\n\n# INTERNAL VARIABLES\n_url = f\"{BASE_URL}&amp;media={media}&amp;term={term}\"\n_session = requests.session()\n\n# MAKE REST API CALL\nresults = _session.get(_url)\n\n# EXTRACT RESULT DATA FROM RESONSE OBJECT\ndata = results.json()['results']\n\n# LOOP OVER RESULTS AND PRINT\nfor result in data:\n    print(f\"{result['trackName']:&lt;50}{result['releaseDate']:&gt;50}\")\n</code></pre> </li> <li> <p>SAVE the file</p> </li> <li> <p>CLICK the green play button</p> </li> </ol> <p></p> <ol> <li> <p>ANSWER the prompts</p> </li> <li> <p>REVIEW the results</p> </li> </ol> <p>The presence of the green play button indicates the Python extension is working.</p> <p>You can also see the Python Debugger on the left, the 4th icon down.</p>"},{"location":"sections/section_6/","title":"Wrap up","text":"<p>The goal of this walk-through was to provide you real-world, hands-on exposure to building a Docker image.  This is just the tip of the iceberg when it comes to what you can with Docker and Dockerfiles.  You can take these same steps for you future projects and modify where needed to meet the needs of the project.</p> <p> Congratulations on building your first Dockerfile and integrating it with Visual Studio Code.</p> <p>The source repository for this page can be accessed by clicking the wwt/docker-foundations.</p> <p>In the source repository there is additional information and a very detailed PowerPoint presentation you can use as a reference.</p>"}]}